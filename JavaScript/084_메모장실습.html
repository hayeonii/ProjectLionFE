<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        main {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        input {
            display: block;
            width: 300px;
            height: 30px;
            margin-bottom: 10px;
        }

        textarea {
            display: block;
            width: 300px;
            height: 300px;
            margin-bottom: 10px;
        }

        button {
            display: block;
            width: 306px;
            height: 30px;
        }
    </style>
</head>
<body>
    <!-- 내 코드 -->
    <!-- <input id="title" type="text" placeholder="제목을 입력해 주세요">
    <textarea name="" id="contents" cols="30" rows="10" placeholder="내용을 입력해 주세요"></textarea>
    <button id="btn">입력</button>
    <div id="print-txt"></div>

    <script>
        const titleVal = document.querySelector('#title')
        const contentsVal = document.querySelector('#contents')
        const btn = document.querySelector('#btn')
        const printTxt = document.querySelector('#print-txt')


        function memo(){
            const title = titleVal.value;
            const contents = contentsVal.value;
            
            localStorage.setItem("제목", JSON.stringify(title))
            localStorage.setItem("내용", JSON.stringify(contents))

            const txt = document.createElement('div')
            txt.innerText = `제목: ${localStorage.getItem('제목')} \n 내용: ${localStorage.getItem('내용')}`;
            printTxt.appendChild(txt)
        }
        
        btn.addEventListener('click', memo)


    </script> -->

    <main>
        <section>
            <input type="text" name="" id="title" />
            <textarea name="" id="content" cols="30" rows="10"></textarea>
            <button onclick="saveNote()">메모</button>
        </section>
        <section id="display"></section>
    </main>
    <script>
        let allMemo = JSON.parse(localStorage.getItem("allMemo"));
        allMemo = allMemo ?? [];
        render();

        function saveNote() {
            const title = document.getElementById("title").value;
            const content = document.getElementById("content").value;

            allMemo.push({ title, content, len: allMemo.length });

            localStorage.setItem("allMemo", JSON.stringify(allMemo));
            render();
        }

        function render() {
            const display = document.getElementById("display");
            display.innerHTML = "";
            for (const item of allMemo) {
                const saveTitle = document.createElement("h2");
                const saveContent = document.createElement("p");
                const saveId = document.createElement("p");
                const deleteMemoBtn = document.createElement("button");

                saveTitle.textContent = item.title;
                saveContent.textContent = item.content;
                saveId.textContent = item.len;
                deleteMemoBtn.textContent = "삭제";
                deleteMemoBtn.setAttribute("id", item.len);
                deleteMemoBtn.setAttribute("onclick", "remove()");

                display.appendChild(saveId);
                display.appendChild(saveTitle);
                display.appendChild(saveContent);
                display.appendChild(deleteMemoBtn);
            }
        }

        function remove() {
            // console.log(event.srcElement.id);
            // console.log(allMemo);
            const idx = allMemo.find(
                (item) => item.len == event.srcElement.id
            );
            if (idx) {
                allMemo.splice(
                    allMemo.findIndex((item) => item.len == idx.len),
                    1
                );
            }
            localStorage.setItem("allMemo", JSON.stringify(allMemo));
            render();
        }
    </script>
</body>
</html>